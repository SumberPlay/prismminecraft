<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>P.R.I.S.M. | Global Monitoring</title>
    <style>
        :root { 
            --map-ui: #00ffcc; 
            --alert: #ff4444;
            --bg-dark: #020505; 
            --panel-bg: rgba(10, 20, 20, 0.9); 
        }
        body { background: var(--bg-dark); color: var(--map-ui); font-family: 'Courier New', monospace; margin: 0; overflow-x: hidden; transition: 0.5s; }
        
        /* Состояние тревоги */
        body.alarm-active { --map-ui: #ff4444; background: #0a0000; }

        .top-bar { 
            background: #000; padding: 15px; border-bottom: 1px solid var(--map-ui); 
            display: flex; justify-content: space-between; align-items: center;
        }

        .map-viewport {
            width: 100%;
            height: 400px;
            background: radial-gradient(circle, #0a2a2a 0%, #000 80%);
            position: relative;
            border-bottom: 1px solid #111;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .radar-grid {
            position: absolute; width: 200%; height: 200%;
            background-image: 
                linear-gradient(rgba(0, 255, 204, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 204, 0.05) 1px, transparent 1px);
            background-size: 50px 50px;
            transform: rotate(15deg);
        }

        /* Точки комплексов */
        .point {
            position: absolute; width: 12px; height: 12px;
            background: var(--map-ui); border-radius: 50%;
            box-shadow: 0 0 15px var(--map-ui);
            cursor: pointer; transition: 0.3s;
            z-index: 5;
        }
        .point:hover { transform: scale(2); }
        .point::after {
            content: attr(data-label); position: absolute; top: 15px; left: 10px;
            font-size: 0.7em; white-space: nowrap; background: #000; padding: 2px 5px;
            border: 1px solid var(--map-ui);
        }

        /* Анимация пульсации для активных точек */
        .point.active-node { animation: pulse 2s infinite; }
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(0, 255, 204, 0.4); } 70% { box-shadow: 0 0 0 20px rgba(0, 255, 204, 0); } 100% { box-shadow: 0 0 0 0 rgba(0, 255, 204, 0); } }

        .container { max-width: 1000px; margin: 30px auto; padding: 0 20px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
        
        .facility-card {
            background: var(--panel-bg); border: 1px solid #1a3333;
            padding: 20px; transition: 0.3s;
        }
        .facility-card:hover { border-color: var(--map-ui); background: rgba(0, 255, 204, 0.05); }
        
        .status-ok { color: #00ff00; }
        .status-warn { color: #ffff00; }
        .status-crit { color: #ff0000; opacity: 0.6; }
        .status-alert { color: #ff0000; font-weight: bold; animation: blink 0.8s infinite; }

        @keyframes blink { 50% { opacity: 0.3; } }

        .back-btn { color: var(--map-ui); text-decoration: none; font-size: 0.9em; border: 1px solid; padding: 5px 15px; transition: 0.3s; }
        .back-btn:hover { background: var(--map-ui); color: #000; }

        #scan-line {
            position: absolute; width: 100%; height: 2px;
            background: rgba(0, 255, 204, 0.2);
            top: 0; animation: scan 4s linear infinite;
        }
        @keyframes scan { from { top: 0; } to { top: 100%; } }
    </style>
</head>
<body>

<div class="top-bar">
    <div>[P.R.I.S.M. GLOBAL ASSETS]</div>
    <div id="sync-status" style="font-size: 0.8em;">SYNC: CONNECTING...</div>
    <a href="staff.html" class="back-btn">ВЕРНУТЬСЯ В ТЕРМИНАЛ</a>
</div>

<div class="map-viewport">
    <div class="radar-grid"></div>
    <div id="scan-line"></div>
    
    <div class="point" style="top: 30%; left: 45%; opacity: 0.4;" data-label="Alpha-M V1 (Offline)"></div>
    <div class="point" style="top: 60%; left: 20%; opacity: 0.4;" data-label="Alpha-M V2 (Offline)"></div>
    <div class="point" style="top: 85%; left: 45%; opacity: 0.4;" data-label="Alpha-M V2.2 (Offline)"></div>
    
    <div class="point active-node" id="v3-point" style="top: 45%; left: 75%;" data-label="Alpha-M V3 (ACTIVE)"></div>

    <div style="z-index: 10; font-size: 0.8em; opacity: 0.5; position: absolute; bottom: 10px;">
        SATELLITE UPLINK: STABLE
    </div>
</div>

<div class="container">
    <h2 style="letter-spacing: 3px; border-bottom: 1px solid #111; padding-bottom: 10px;">РЕЕСТР ОБЪЕКТОВ</h2>
    
    <div class="grid">
        <div class="facility-card">
            <h3>Alpha-M V1</h3>
            <p><b>Локация:</b> Курампа (2), центр. Офис ES.</p>
            <p><b>Статус:</b> <span class="status-crit">СВЯЗЬ ПОТЕРЯНА</span></p>
        </div>

        <div class="facility-card">
            <h3>Alpha-M V2</h3>
            <p><b>Локация:</b> Курампа (3), центр.</p>
            <p><b>Статус:</b> <span class="status-crit">СВЯЗЬ ПОТЕРЯНА</span></p>
        </div>

       <div class="facility-card">
            <h3>Alpha-M V2.2</h3>
            <p><b>Локация:</b> Курампа (3), база 34ray_</p>
            <p><b>Статус:</b> <span class="status-crit">СВЯЗЬ ПОТЕРЯНА</span></p>
        </div>

        <div class="facility-card" id="v3-card" style="border-color: var(--map-ui);">
            <h3 id="v3-title">Alpha-M V3</h3>
            <p><b>Локация:</b> Blink, база МэнсиКейн</p>
            <p><b>Назначение:</b> Текущий штаб P.R.I.S.M. Координация всех операций.</p>
            <p><b>Статус:</b> <span id="v3-status" class="status-ok">НОРМА</span></p>
        </div>
    </div>
</div>

<script>
    const RENDER_API = "https://prism-bot.onrender.com"; // ЗАМЕНИ НА СВОЮ

    async function syncAssets() {
        try {
            const res = await fetch(`${RENDER_API}/status`);
            const data = await res.json();
            
            const syncLabel = document.getElementById('sync-status');
            const v3Status = document.getElementById('v3-status');
            const v3Card = document.getElementById('v3-card');
            
            syncLabel.innerText = `SYNC: ${data.label}`;
            syncLabel.style.color = data.color;

            if (data.state === "RED") {
                document.body.classList.add('alarm-active');
                v3Status.innerText = "КРИТИЧЕСКАЯ УГРОЗА";
                v3Status.className = "status-alert";
                v3Card.style.borderColor = "red";
            } else {
                document.body.classList.remove('alarm-active');
                v3Status.innerText = "НОРМА";
                v3Status.className = "status-ok";
                v3Card.style.borderColor = "#1a3333";
            }
        } catch (e) {
            document.getElementById('sync-status').innerText = "SYNC: ERROR";
        }
    }

    setInterval(syncAssets, 4000);
    syncAssets();
</script>

</body>
</html>

