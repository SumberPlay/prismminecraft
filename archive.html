<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>P.R.I.S.M. | SECURE TERMINAL</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <style>
        :root { 
            --neon-blue: #00ffcc; 
            --neon-green: #00ff41;
            --neon-red: #ff3333; 
            --neon-gold: #ffd700;
            --bg-dark: #050505; 
            --panel-bg: rgba(10, 16, 16, 0.95);
            --border: #1a3a3a;
            --font-main: 'Courier New', monospace;
        }

        * { box-sizing: border-box; }
        
        body { 
            background: var(--bg-dark); color: #ccc; 
            font-family: var(--font-main); margin: 0; 
            height: 100vh; overflow: hidden; text-transform: uppercase;
        }

        /* --- ЭФФЕКТЫ --- */
        .overlay { position: fixed; inset: 0; background: repeating-linear-gradient(0deg, rgba(0,0,0,0.1) 0px, transparent 2px); pointer-events: none; z-index: 9000; }
        .scanline { position: fixed; top: 0; left: 0; width: 100%; height: 4px; background: rgba(0, 255, 204, 0.03); z-index: 9001; pointer-events: none; animation: scan 8s linear infinite; }
        @keyframes scan { from { top: -10%; } to { top: 110%; } }

        /* --- ЭКРАН ПРОВЕРКИ ДОСТУПА --- */
        #access-screen { 
            position: fixed; inset: 0; z-index: 10000; background: #000; 
            display: flex; align-items: center; justify-content: center; text-align: center;
        }
        .error-box { border: 1px solid var(--neon-red); padding: 40px; background: rgba(20,0,0,0.2); }

        /* --- ИНТЕРФЕЙС --- */
        #main-interface { display: none; height: 100vh; grid-template-rows: 60px 1fr; }
        
        header { 
            border-bottom: 1px solid var(--border); background: #080808; 
            display: flex; align-items: center; justify-content: space-between; 
            padding: 0 25px;
        }
        .header-title { font-size: 1.2em; letter-spacing: 4px; color: #fff; font-weight: bold; text-shadow: 0 0 10px rgba(255,255,255,0.2); }
        .sys-status { font-size: 0.75em; color: #666; display: flex; gap: 25px; }
        .val { color: var(--neon-green); font-weight: bold; }

        .workspace { display: grid; grid-template-columns: 260px 1fr; height: calc(100vh - 60px); overflow: hidden; }

        aside { border-right: 1px solid var(--border); background: #020202; display: flex; flex-direction: column; overflow-y: auto; }
        .nav-header { padding: 20px; color: #555; font-size: 0.7em; border-bottom: 1px solid #111; letter-spacing: 1px; }
        
        .nav-btn { 
            padding: 18px 25px; color: #777; cursor: pointer; border-left: 2px solid transparent; 
            transition: 0.3s; font-size: 0.9em; letter-spacing: 1px;
        }
        .nav-btn:hover { color: #fff; background: rgba(255,255,255,0.03); }
        .nav-btn.active { 
            color: var(--neon-blue); border-left-color: var(--neon-blue); 
            background: linear-gradient(90deg, rgba(0,255,204,0.08), transparent); 
        }

        main { position: relative; background: radial-gradient(circle at center, #0a0a0a 0%, #000 100%); height: 100%; overflow: hidden; }
        .view-section { display: none; height: 100%; grid-template-columns: 320px 1fr; } 
        .view-section.active { display: grid; }

        .list-column { overflow-y: auto; border-right: 1px solid var(--border); background: rgba(0,0,0,0.3); height: 100%; }
        .list-item { 
            padding: 20px; border-bottom: 1px solid #111; cursor: pointer; 
            display: flex; align-items: center; gap: 15px; transition: 0.2s; opacity: 0.7;
        }
        .list-item:hover { opacity: 1; background: rgba(255,255,255,0.02); }
        .list-item.active { opacity: 1; background: rgba(0, 255, 204, 0.05); border-left: 3px solid var(--neon-blue); }
        .list-item.locked { opacity: 0.3; }
        
        .anomaly-marker { width: 10px; height: 10px; border-radius: 50%; box-shadow: 0 0 5px currentColor; }
        .m-safe { background: var(--neon-green); color: var(--neon-green); }
        .m-moderate { background: var(--neon-gold); color: var(--neon-gold); }
        .m-critical { background: var(--neon-red); color: var(--neon-red); animation: pulse 1s infinite; }

        .viewer-column { padding: 40px; overflow-y: auto; height: 100%; }
        .empty-state { height: 100%; display: flex; align-items: center; justify-content: center; color: #333; letter-spacing: 2px; }

        .dossier-header { display: flex; gap: 30px; margin-bottom: 30px; border-bottom: 1px solid #222; padding-bottom: 30px; }
        .dossier-img { width: 160px; height: 160px; object-fit: cover; border: 1px solid #333; padding: 4px; background: #000; }
        
        .dossier-title { font-size: 2em; margin: 0; color: #fff; line-height: 1.1; margin-bottom: 10px; }
        .dossier-subtitle { color: var(--neon-blue); font-size: 0.9em; letter-spacing: 2px; margin-bottom: 5px; }
        .tag-box { display: inline-block; border: 1px solid; padding: 4px 8px; font-size: 0.7em; margin-top: 10px; }

        .section-title { color: #555; margin-top: 30px; margin-bottom: 10px; font-size: 0.8em; letter-spacing: 1px; border-bottom: 1px solid #1a1a1a; display: inline-block; }
        .text-content { font-size: 0.95em; color: #aaa; line-height: 1.6; white-space: pre-wrap; max-width: 800px; }
        .typing-cursor::after { content: '█'; animation: blink 0.8s infinite; color: var(--neon-blue); }

        .c-safe { color: var(--neon-green); border-color: var(--neon-green); }
        .c-moderate { color: var(--neon-gold); border-color: var(--neon-gold); }
        .c-critical { color: var(--neon-red); border-color: var(--neon-red); text-shadow: 0 0 10px var(--neon-red); }

        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.3; } 100% { opacity: 1; } }
        @keyframes blink { 50% { opacity: 0; } }
        
        /* СТИЛИ СКРОЛЛБАРА */
        ::-webkit-scrollbar { width: 5px; height: 5px; }
        ::-webkit-scrollbar-track { background: #050505; }
        ::-webkit-scrollbar-thumb { background: #1a3a3a; border-radius: 0; }
        ::-webkit-scrollbar-thumb:hover { background: var(--neon-blue); }
    </style>
</head>
<body>

<div class="overlay"></div>
<div class="scanline"></div>

<div id="access-screen">
    <div id="status-box">
        <div style="color: var(--neon-blue); letter-spacing: 5px; margin-bottom: 20px;" id="status-text">СКАНИРОВАНИЕ БИОМЕТРИКИ...</div>
    </div>
</div>

<div id="main-interface">
    <header>
        <div class="header-title">P.R.I.S.M. <span style="color:var(--neon-blue); font-size:0.7em;">// DATABASE_V4.1_DB_LINKED</span></div>
        <div class="sys-status">
            <span>USER: <span id="u-name" class="val">---</span></span>
            <span>CLEARANCE: <span id="u-level" class="val">0</span></span>
            <span style="cursor: pointer; color: var(--neon-red);" onclick="logout()">[ВЫХОД]</span>
        </div>
    </header>

    <div class="workspace">
        <aside>
            <div class="nav-header">SELECT MODULE</div>
            <div class="nav-btn active" onclick="switchModule('anomalies', this)">> РЕЕСТР АНОМАЛИЙ</div>
            <div class="nav-btn" onclick="switchModule('staff', this)">> ЛИЧНЫЕ ДЕЛА</div>
            <div class="nav-btn" onclick="switchModule('archive', this)">> АРХИВ</div>
        </aside>

        <main>
            <div id="mod-anomalies" class="view-section active">
                <div class="list-column" id="anomaly-list"></div>
                <div class="viewer-column">
                    <div id="ano-placeholder" class="empty-state">ВЫБЕРИТЕ ОБЪЕКТ ИЗ СПИСКА</div>
                    <div id="ano-content" style="display:none;">
                        <div class="dossier-header">
                            <img id="a-img" src="" class="dossier-img" style="filter: sepia(1) hue-rotate(180deg) contrast(1.2);">
                            <div>
                                <h1 id="a-code" class="dossier-title"></h1>
                                <div id="a-name" class="dossier-subtitle"></div>
                                <div id="a-class" class="tag-box"></div>
                            </div>
                        </div>
                        <div class="section-title">ОСОБЫЕ УСЛОВИЯ СОДЕРЖАНИЯ</div>
                        <div id="a-proc" class="text-content" style="color: #fff; margin-bottom: 20px;"></div>
                        <div class="section-title">ОПИСАНИЕ ОБЪЕКТА</div>
                        <div id="a-desc" class="text-content"></div>
                    </div>
                </div>
            </div>

            <div id="mod-staff" class="view-section">
                <div class="list-column" id="staff-list"></div>
                <div class="viewer-column">
                    <div id="staff-placeholder" class="empty-state">ВЫБЕРИТЕ ЛИЧНОЕ ДЕЛО</div>
                    <div id="staff-content" style="display:none;">
                        <div class="dossier-header">
                            <img id="s-img" src="" class="dossier-img">
                            <div>
                                <h1 id="s-name" class="dossier-title"></h1>
                                <div id="s-id" class="dossier-subtitle"></div>
                                <div id="s-level" class="tag-box" style="border-color: var(--neon-blue); color: var(--neon-blue)"></div>
                            </div>
                        </div>
                        <div class="section-title">БИОГРАФИЧЕСКАЯ СПРАВКА</div>
                        <div id="s-bio" class="text-content"></div>
                    </div>
                </div>
            </div>

            <div id="mod-archive" class="view-section">
    <div class="list-column" style="display: flex; flex-direction: column;">
        <div style="padding: 15px; border-bottom: 1px solid var(--border); background: rgba(0,0,0,0.8);">
            <input type="text" id="archive-search" placeholder="ПОИСК ПО НАЗВАНИЮ..." 
                   style="width: 100%; background: #000; border: 1px solid var(--border); color: var(--neon-blue); padding: 10px; font-family: inherit; margin-bottom: 10px; outline: none;">
            
            <div style="display: flex; gap: 10px;">
                <select id="archive-sort" style="flex-grow: 1; background: #000; border: 1px solid var(--border); color: #888; padding: 5px; font-family: inherit; cursor: pointer;">
                    <option value="newest">СНАЧАЛА НОВЫЕ</option>
                    <option value="oldest">СНАЧАЛА СТАРЫЕ</option>
                    <option value="type">ПО ТИПУ (SORT_TYPE)</option>
                    <option value="level">ПО ДОПУСКУ (L1-L5)</option>
                </select>
            </div>
        </div>
        
        <div id="archive-list" style="flex-grow: 1; overflow-y: auto;"></div>
    </div>

    <div class="viewer-column">
        <div id="archive-placeholder" class="empty-state">ВЫБЕРИТЕ ПРОТОКОЛ ДЛЯ ЧТЕНИЯ</div>
        <div id="archive-content" style="display:none;">
            <div class="dossier-header">
                <div style="width:160px; height:160px; border:1px solid #333; display:flex; align-items:center; justify-content:center; background:#000;">
                    <span id="r-type-icon" style="font-size:1.5em; color:var(--neon-blue); text-align:center;">DOC</span>
                </div>
                <div>
                    <h1 id="r-title" class="dossier-title"></h1>
                    <div id="r-meta" class="dossier-subtitle"></div>
                    <div id="r-level" class="tag-box"></div>
                </div>
            </div>
            <div class="section-title">ТЕКСТ ПРОТОКОЛА</div>
            <div id="r-text" class="text-content"></div>
        </div>
    </div>
</div>
        </main>
    </div>
</div>

<script>
    const RENDER_API = "https://prism-bot.onrender.com";
    
    let USER = { name: "", level: 0 };
    let typeTimer = null;

    window.onload = function() {
        const session = localStorage.getItem('prism_user');
        if (session) {
            const data = JSON.parse(session);
            USER.name = data.name || "UNKNOWN";
            USER.level = parseInt(data.level) || 0;
            initInterface();
        } else {
            // Если нет сессии - показываем ошибку
            const statusBox = document.getElementById('status-box');
            statusBox.innerHTML = `
                <div style="border: 1px solid var(--neon-red); padding: 40px; background: rgba(20,0,0,0.5);">
                    <h2 style="color: var(--neon-red); letter-spacing: 10px;">ACCESS DENIED</h2>
                    <p style="color: #666; font-size: 0.8em; margin: 20px 0;">ТОКЕН ДОСТУПА НЕ ОБНАРУЖЕН</p>
                    <a href="staff.html" style="color: var(--neon-blue); text-decoration: none; border: 1px solid; padding: 10px 20px; display: inline-block;">ВЕРНУТЬСЯ К ТЕРМИНАЛУ</a>
                </div>
            `;
        }
    };

    function initInterface() {
        document.getElementById('access-screen').style.display = 'none';
        document.getElementById('main-interface').style.display = 'grid';
        document.getElementById('u-name').innerText = USER.name;
        document.getElementById('u-level').innerText = "LEVEL " + USER.level;

        // Запускаем загрузку всех модулей из БД
        loadAnomalies();
        loadStaff();
        loadArchive();
    }

    function logout() {
        location.href = "staff.html";
    }

    function switchModule(modId, btn) {
        document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.nav-btn').forEach(el => el.classList.remove('active'));
        document.getElementById(`mod-${modId}`).classList.add('active');
        btn.classList.add('active');
    }

    /* -----------------------------------------------------------
       МОДУЛЬ 1: АНОМАЛИИ (ГРУЗИМ ИЗ БД /get-anomalies)
       ----------------------------------------------------------- */
    async function loadAnomalies() {
        const list = document.getElementById('anomaly-list');
        list.innerHTML = "<div style='padding:20px; color:#444'>ПОИСК ОБЪЕКТОВ В БД...</div>";                
        try {
            const res = await fetch(`${RENDER_API}/get-anomalies`, {
                headers: { 'x-access-level': USER.level } // Передаем допуск
            });
            const db = await res.json();
            list.innerHTML = "";
            
            db.forEach(a => {
                const isLocked = a.is_restricted; // Теперь сервер сам скажет, заблокировано ли
                const item = document.createElement('div');
                item.className = `list-item ${isLocked ? 'locked' : ''}`;
                item.onclick = () => openAnomaly(a, item, isLocked);

                item.innerHTML = `
                    <div class="anomaly-marker m-${isLocked ? 'critical' : (a.class || 'safe')}"></div>
                    <div>
                        <div style="color:#fff">#${a.id} ${a.code}</div>
                        <div style="font-size:0.7em">CLASS: ${a.class.toUpperCase()}</div>
                    </div>`;
                list.appendChild(item);
            });
        } catch (e) {
            list.innerHTML = `<div style='padding:20px; color:var(--neon-red)'>ОШИБКА СВЯЗИ С БД</div>`;
        }
    }

    function openAnomaly(data, el, isLocked) {
        document.querySelectorAll('#anomaly-list .list-item').forEach(i => i.classList.remove('active'));
        el.classList.add('active');
        document.getElementById('ano-placeholder').style.display = 'none';
        document.getElementById('ano-content').style.display = 'block';

        const code = document.getElementById('a-code');
        const badge = document.getElementById('a-class');
        badge.className = "tag-box";

        if(isLocked) {
            document.getElementById('a-img').src = "https://via.placeholder.com/160/000000/ff3333?text=LOCKED";
            code.innerText = `[ДОСТУП ЗАПРЕЩЕН]`; code.style.color = "var(--neon-red)";
            document.getElementById('a-name').innerText = "ТРЕБУЕТСЯ УРОВЕНЬ " + data.lvl;
            badge.innerText = "UNKNOWN"; badge.classList.add('c-critical');
            document.getElementById('a-proc').innerText = "[ДАННЫЕ УДАЛЕНЫ]";
            typeText(document.getElementById('a-desc'), "Попытка несанкционированного доступа зафиксирована. Инцидент занесен в лог.");
        } else {
            // Генерация картинки или ссылка из БД
            document.getElementById('a-img').src = data.img || `https://via.placeholder.com/160/000000/00ffcc?text=OBJ-${data.id}`;
            code.innerText = `ОБЪЕКТ #${data.id}`; code.style.color = "#fff";
            document.getElementById('a-name').innerText = `CODENAME: "${data.code}"`;
            badge.innerText = (data.class || "safe").toUpperCase(); 
            badge.classList.add(`c-${data.class || 'safe'}`);
            document.getElementById('a-proc').innerText = data.proc || "Нет особых условий.";
            typeText(document.getElementById('a-desc'), data.desc || "Описание отсутствует.");
        }
    }

    /* -----------------------------------------------------------
       МОДУЛЬ 2: ПЕРСОНАЛ (ГРУЗИМ ИЗ БД /get-admin-staff)
       ----------------------------------------------------------- */
    async function loadStaff() {
        const list = document.getElementById('staff-list');
        list.innerHTML = "<div style='padding:20px; color:#444'>ЗАГРУЗКА БАЗЫ СУБЪЕКТОВ...</div>";
        try {
            const res = await fetch(`${RENDER_API}/get-staff`, {
                headers: { 'x-access-level': USER.level }
            }); 
            const db = await res.json();
            list.innerHTML = "";

            db.forEach(p => {
                const isLocked = p.is_restricted;
                const item = document.createElement('div');
                item.className = `list-item ${isLocked ? 'locked' : ''}`;
                item.onclick = () => openStaff(p, item, isLocked);
                
                // Используем mc_name, который сервер прислал (для заблокированных там будет Steve/MHF_Question)
                const skin = p.mc_name || 'MHF_Question';

                item.innerHTML = `
                    <img src="https://minotar.net/helm/${skin}/32.png" style="width:32px;filter:grayscale(1)">
                    <div>
                        <div style="color:#fff">${p.display_name || p.name || p.id}</div>
                        <div style="font-size:0.7em">RANK: ${p.rank || 'CITIZEN'} // L${p.level}</div>
                    </div>`;
                list.appendChild(item);
            });
        } catch(e) {
            list.innerHTML = "<div style='padding:20px; color:var(--neon-red)'>ОШИБКА ДОСТУПА</div>";
        }
    }

    function openStaff(p, el, isHidden) {
        document.querySelectorAll('#staff-list .list-item').forEach(i => i.classList.remove('active'));
        el.classList.add('active');
        document.getElementById('staff-placeholder').style.display = 'none';
        document.getElementById('staff-content').style.display = 'block';
        const lvl = document.getElementById('s-level');

        if(isHidden) {
            document.getElementById('s-img').src = "https://minotar.net/armor/bust/MHF_Question/160.png";
            document.getElementById('s-name').innerText = "RESTRICTED";
            document.getElementById('s-id').innerText = "SUBJECT_ID: [REDACTED]";
            lvl.innerText = "ACCESS LEVEL " + (p.level || "?"); lvl.style.color = "var(--neon-red)";
            typeText(document.getElementById('s-bio'), "Данные субъекта защищены протоколом безопасности.");
        } else {
            const skin = p.mc_name || p.id || 'MHF_Question';
            document.getElementById('s-img').src = `https://minotar.net/armor/bust/${skin}/160.png`;
            document.getElementById('s-name').innerText = p.display_name || p.id;
            document.getElementById('s-id').innerText = `ID: ${p.id} | РАНГ: ${p.rank || 'НЕ УКАЗАН'}`;
            lvl.innerText = "LEVEL " + (p.level || 1); lvl.style.color = "var(--neon-blue)";
            // Если в таблице players есть поле bio — покажет его, если нет — стандартную фразу
            typeText(document.getElementById('s-bio'), p.bio || "Дополнительная информация в личном деле отсутствует.");
        }
    }

    /* -----------------------------------------------------------
       МОДУЛЬ 3: АРХИВ (ГРУЗИМ ИЗ БД /get-archive)
       ----------------------------------------------------------- */
    let archiveData = []; // Хранилище для всех записей из БД

async function loadArchive() {
    const list = document.getElementById('archive-list');
    list.innerHTML = "<div style='padding:20px; color:#444'>СИНХРОНИЗАЦИЯ С АРХИВОМ...</div>";
    
    try {
        const res = await fetch(`${RENDER_API}/get-archive`, {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json',
                // ПЕРЕДАЕМ УРОВЕНЬ ДОПУСКА СЕРВЕРУ
                'x-access-level': USER.level 
            }
        });
        
        if (!res.ok) throw new Error("API_ERROR");
        
        archiveData = await res.json();
        
        document.getElementById('archive-search').oninput = renderArchive;
        document.getElementById('archive-sort').onchange = renderArchive;

        renderArchive();
    } catch (e) {
        console.error("Archive Error:", e);
        list.innerHTML = `<div style='padding:20px; color:var(--neon-red)'>ОШИБКА СВЯЗИ С ЯДРОМ</div>`;
    }
}

function renderArchive() {
    const list = document.getElementById('archive-list');
    const searchTerm = document.getElementById('archive-search').value.toLowerCase();
    const sortMethod = document.getElementById('archive-sort').value;

    // 1. ФИЛЬТРАЦИЯ
    let filtered = archiveData.filter(item => {
        const titleMatch = (item.title || "").toLowerCase().includes(searchTerm);
        return titleMatch;
    });

    // 2. СОРТИРОВКА
    filtered.sort((a, b) => {
        if (sortMethod === 'newest') return b.id - a.id;
        if (sortMethod === 'oldest') return a.id - b.id;
        if (sortMethod === 'level') return (a.level || 0) - (b.level || 0);
        if (sortMethod === 'type') {
            return (a.sort_type || "Z").localeCompare(b.sort_type || "Z");
        }
        return 0;
    });

    // 3. ОТРИСОВКА
    list.innerHTML = "";
    if (filtered.length === 0) {
        list.innerHTML = "<div style='padding:20px; color:#666'>НЕТ СОВПАДЕНИЙ В РЕЕСТРЕ</div>";
        return;
    }

    filtered.forEach(file => {
        const fLevel = file.level || 0;
        const isLocked = USER.level < fLevel;
        const sType = file.sort_type || "LOG";
        
        const item = document.createElement('div');
        item.className = `list-item ${isLocked ? 'locked' : ''}`;
        item.onclick = () => openArchiveFile(file, item, isLocked);

        item.innerHTML = `
            <div class="anomaly-marker ${isLocked ? 'm-critical' : 'm-safe'}"></div>
            <div style="flex-grow: 1">
                <div style="color:#fff">${isLocked ? '[ДАННЫЕ ЗАБЛОКИРОВАНЫ]' : (file.title || "Untitled")}</div>
                <div style="font-size:0.75em; color:#555; display:flex; justify-content:space-between; margin-top:5px;">
                    <span>${file.date || '---'} | L${fLevel}</span>
                    <span style="color:var(--neon-blue)">[${sType}]</span>
                </div>
            </div>
        `;
        list.appendChild(item);
    });
}
    function openArchiveFile(file, el, isLocked) {
        document.querySelectorAll('#archive-list .list-item').forEach(i => i.classList.remove('active'));
        el.classList.add('active');
        document.getElementById('archive-placeholder').style.display = 'none';
        document.getElementById('archive-content').style.display = 'block';

        const title = document.getElementById('r-title');
        const meta = document.getElementById('r-meta');
        const badge = document.getElementById('r-level');
        const text = document.getElementById('r-text');

        badge.className = "tag-box";

        if(isLocked) {
            title.innerText = "[ACCESS DENIED]"; title.style.color = "var(--neon-red)";
            meta.innerText = "CRITICAL SECURITY BREACH PREVENTION";
            badge.innerText = "REQUIRED: L" + (file.level || "?"); badge.classList.add('c-critical');
            typeText(text, "Ваш уровень допуска недостаточно высок для расшифровки данного протокола. Информация была передана в отдел внутренней безопасности.");
        } else {
            title.innerText = file.title || "БЕЗ НАЗВАНИЯ"; title.style.color = "#fff";
            meta.innerText = `DOC_ID: ${file.id || 'UKN'} | DATE: ${file.date || '---'}`;
            badge.innerText = "CLEARANCE: L" + (file.level || 0); badge.classList.add('c-safe');
            typeText(text, file.content || "Текстовые данные отсутствуют или повреждены.");
        }
    }

    // Эффект печатающей машинки
    function typeText(el, text) {
        if(typeTimer) clearInterval(typeTimer);
        el.innerHTML = ""; 
        el.classList.add('typing-cursor');
        
        let i = 0;
        // Ускорил печать, чтобы не ждать долго
        typeTimer = setInterval(() => {
            el.innerText = text.substring(0, i);
            i += 2; 
            if(i > text.length) { 
                el.innerText = text; 
                clearInterval(typeTimer); 
                el.classList.remove('typing-cursor'); 
            }
        }, 5);
    }
</script>
</body>
</html>




