<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>P.R.I.S.M. | Протоколы НИД</title>
    <style>
        :root { 
            --science-blue: #00a2ff; 
            --bg-dark: #050505; 
            --panel-bg: #111; 
            --alert-red: #ff4444;
        }
        body { 
            background: var(--bg-dark); 
            color: #d1d1d1; 
            font-family: 'Courier New', monospace; 
            margin: 0; 
            transition: 0.5s;
        }
        
        /* Эффект при тревоге */
        body.lockdown { 
            background: #000a1a; 
            filter: hue-rotate(-20deg);
        }

        nav { background: #000; padding: 15px; border-bottom: 1px solid #333; text-align: center; }
        nav a { color: #888; text-decoration: none; text-transform: uppercase; padding: 0 20px; transition: 0.3s; }
        nav a:hover { color: var(--science-blue); }
        
        .container { max-width: 900px; margin: 50px auto; padding: 0 20px; position: relative; }
        
        .header-nid { 
            border-left: 5px solid var(--science-blue); 
            padding-left: 20px; 
            margin-bottom: 40px;
        }
        
        h2 { color: var(--science-blue); letter-spacing: 3px; margin-bottom: 5px; }
        
        #lockdown-msg { 
            display: none; 
            color: var(--alert-red); 
            font-weight: bold; 
            margin-bottom: 20px; 
            border: 1px solid var(--alert-red); 
            padding: 10px;
            text-align: center;
            animation: blink 1s infinite;
        }

        .protocol-card { 
            background: var(--panel-bg); 
            border: 1px solid #222; 
            padding: 25px; 
            margin-bottom: 20px;
            position: relative;
            transition: 0.3s;
        }

        .protocol-card::before {
            content: "SECURE DATA";
            position: absolute; top: 10px; right: 15px;
            font-size: 0.6em; color: #333;
        }

        .status-active { color: #00ff00; font-size: 0.8em; }
        
        .methodology {
            background: #000;
            border-left: 2px solid #444;
            padding: 10px 15px;
            margin: 15px 0;
            font-style: italic;
            color: #aaa;
        }

        .warning-box {
            border: 1px solid #ffaa00;
            color: #ffaa00;
            padding: 10px;
            font-size: 0.9em;
            margin-top: 10px;
        }

        .back-link { color: var(--science-blue); text-decoration: none; display: inline-block; margin-top: 20px; }
        
        @keyframes blink { 50% { opacity: 0; } }

        /* Стиль для заблокированных данных */
        .lockdown .protocol-card { opacity: 0.3; pointer-events: none; filter: blur(2px); }
    </style>
</head>
<body>

<nav>
    <a href="index.html">Главная</a>
    <a href="staff.html">Терминал</a>
    <a href="assets.html">Карта объектов</a>
</nav>

<div class="container">
    <div id="lockdown-msg">ПРОТОКОЛ LOCKDOWN: ДОСТУП К НАУЧНЫМ ДАННЫМ ОГРАНИЧЕН ДО СТАБИЛИЗАЦИИ</div>

    <div class="header-nid">
        <h2>ДЕПАРТАМЕНТ НИД</h2>
        <p>Протоколы исследований негуманоидных форм жизни и материи</p>
        <div id="sync-info" style="font-size: 0.7em; color: #444;">СВЯЗЬ С ЛАБОРАТОРИЕЙ: УСТАНОВЛЕНА</div>
    </div>

    <div class="protocol-card">
        <span class="status-active">● СТАТУС: АКТУАЛЬНО</span>
        <h3>Протокол №12-Бета: "Спектральный анализ"</h3>
        <p>Используется для определения физической плотности существ, существующих вне видимого спектра.</p>
        <div class="methodology">
            Использование ультрафиолетовых лазеров мощностью свыше 500Тв для фиксации фотонного отклика аномалии.
        </div>
        <div class="warning-box">
            ВНИМАНИЕ: Не применять к объектам с кремниевой структурой — возможна детонация.
        </div>
    </div>

    <div class="protocol-card">
        <span class="status-active">● СТАТУС: АКТУАЛЬНО</span>
        <h3>Протокол №05-Гамма: "Био-резонанс"</h3>
        <p>Изучение влияния аномалии на биологические ткани человека (через защищенные барьеры).</p>
        <div class="methodology">
            Замер уровня кортизола и адреналина у персонала в радиусе 10 метров от камеры содержания. 
        </div>
    </div>

    <div class="protocol-card">
        <span style="color: #ff4444;">● СТАТУС: ЗАМОРОЖЕНО</span>
        <h3>Протокол №09-Зета: "Прямой контакт"</h3>
        <p>Физическое взаимодействие с негуманоидными сущностями с использованием робототехники.</p>
        <p style="color: #666;">Данный протокол временно приостановлен после инцидента в Секторе-12.</p>
    </div>

    <a href="staff.html" class="back-link">&larr; Вернуться в терминал</a>
</div>

<script>
    const RENDER_API = "https://prism-bot.onrender.com"; // ЗАМЕНИ НА СВОЮ

    async function checkSystemStatus() {
        try {
            const res = await fetch(`${RENDER_API}/status`);
            const data = await res.json();
            
            const body = document.body;
            const msg = document.getElementById('lockdown-msg');
            const syncInfo = document.getElementById('sync-info');

            syncInfo.innerText = `СВЯЗЬ С ЛАБОРАТОРИЕЙ: ${data.label}`;
            syncInfo.style.color = data.color;

            if (data.state === "RED") {
                body.classList.add('lockdown');
                msg.style.display = "block";
            } else {
                body.classList.remove('lockdown');
                msg.style.display = "none";
            }
        } catch (e) {
            document.getElementById('sync-info').innerText = "СВЯЗЬ ПОТЕРЯНА";
        }
    }

    setInterval(checkSystemStatus, 4000);
    checkSystemStatus();
</script>

</body>
</html>

