<!DOCTYPE html>
<html lang="ru">
<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <meta charset="UTF-8">
    <title>P.R.I.S.M. | Staff Portal</title>
    <style>
        :root { 
            --neon-green: #00ffcc; 
            --alert-red: #ff4444; 
            --gold: #ffd700;
            --bg-dark: #050505; 
            --panel-bg: #111; 
        }
        body { background: var(--bg-dark); color: #d1d1d1; font-family: 'Courier New', monospace; margin: 0; }
        nav { background: #000; padding: 15px; border-bottom: 1px solid #333; text-align: center; }
        nav a { color: #888; text-decoration: none; text-transform: uppercase; padding: 0 20px; }
        nav a:hover { color: var(--neon-green); }
        .container { max-width: 800px; margin: 50px auto; padding: 0 20px; }
        .card { background: var(--panel-bg); border: 1px solid #222; padding: 30px; }
        
        input { 
            background: #000; border: 1px solid #333; color: var(--neon-green); 
            padding: 15px; width: 100%; margin-bottom: 20px; box-sizing: border-box; 
        }

        .btn { 
            background: #1a1a1a; border: 1px solid var(--neon-green); color: var(--neon-green); 
            padding: 15px; width: 100%; cursor: pointer; font-weight: bold; 
            text-transform: uppercase; transition: 0.3s; margin-bottom: 10px;
        }
        .btn:hover { background: var(--neon-green); color: #000; box-shadow: 0 0 10px var(--neon-green); }
        
        /* –û—Å–æ–±—ã–π —Å—Ç–∏–ª—å –¥–ª—è –í—ã—Å—à–µ–≥–æ –°–æ–≤–µ—Ç–∞ */
        .btn-council { border-color: var(--gold); color: var(--gold); }
        .btn-council:hover { background: var(--gold); color: #000; box-shadow: 0 0 15px var(--gold); }

        .role-tag { font-size: 0.8em; color: #666; text-transform: uppercase; letter-spacing: 2px; }
        #staff-content { display: none; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px; }
    </style>
</head>
<body>

<nav>
    <a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a>
    <a href="staff.html">–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º</a>
</nav>

<div class="container">
    <div id="login-zone">
        <h2 style="text-align: center;">–ê–í–¢–û–†–ò–ó–ê–¶–ò–Ø –¢–ï–†–ú–ò–ù–ê–õ–ê</h2>
        <div class="card">
            <input type="text" id="uid" placeholder="ID –°–û–¢–†–£–î–ù–ò–ö–ê">
            <input type="password" id="ups" placeholder="–ü–ê–†–û–õ–¨">
            <button class="btn" onclick="checkAuth()">–í–•–û–î</button>
            <p id="err" style="color: var(--alert-red); display: none; text-align: center;">–û–®–ò–ë–ö–ê: –î–û–°–¢–£–ü –ó–ê–ü–†–ï–©–ï–ù</p>
        </div>
    </div>

    <div id="staff-content">
        <div class="role-tag" id="user-role">Role: Undefined</div>
        <h2 id="greet" style="margin-top: 5px;">–ü–ê–ù–ï–õ–¨ –£–ü–†–ê–í–õ–ï–ù–ò–Ø</h2>
        <hr border="0" style="border-bottom: 1px solid #222; margin-bottom: 20px;">

        <div class="grid" id="buttons-container">
            </div>

        <button onclick="logout()" style="background:none; border:none; color:#444; margin-top:40px; cursor:pointer; width: 100%;">[–ó–ê–í–ï–†–®–ò–¢–¨ –°–ï–ê–ù–°]</button>
    </div>
</div>

<script>
    const staffDB = {
        "M4SK": { pass: "5e03fcd2d70a976a6b026374da5da3f9", role: "scientific", level: 2, name: "–ú—ç–Ω—Å–∏–ö–µ–π–Ω, –ù–ò–î" },
        "KRMP": { pass: "1bf502b835ee007957e558cbb1959ecb", role: "military", level: 3, name: "–ö—Ä–∏–º–ø–∏, –≥–ª–∞–≤–∞ –í–ì–†" },
        "SUMBR": { pass: "8aaa688aadaf78796f5f620a4897eeb3", role: "council", level: 5, name: "–°–∞–º–±–µ—Ä, –í—ã—Å—à–∏–π –°–æ–≤–µ—Ç" },
        "MRYZE": { pass: "b0eee0a274f64e6f5792b85c93321159", role: "council", level: 5, name: "–Æ–∑, –í—ã—Å—à–∏–π –°–æ–≤–µ—Ç" }
    };

    // --- –ü–†–û–í–ï–†–ö–ê –°–ï–°–°–ò–ò –ü–†–ò –ó–ê–ì–†–£–ó–ö–ï ---
    window.onload = function() {
        const savedUID = sessionStorage.getItem('prism_uid');
        if (savedUID && staffDB[savedUID]) {
            renderDashboard(staffDB[savedUID]);
        }
    };

    function checkAuth() {
        const id = document.getElementById('uid').value;
        const ps = document.getElementById('ups').value;
        const user = staffDB[id];

        if (user) {
            const hashedInput = CryptoJS.MD5(ps).toString();

            if (user.pass === hashedInput) {
                // –°–û–•–†–ê–ù–Ø–ï–ú –í –°–ï–°–°–ò–Æ (–¥–æ –∑–∞–∫—Ä—ã—Ç–∏—è –≤–∫–ª–∞–¥–∫–∏)
                sessionStorage.setItem('prism_uid', id); 
                renderDashboard(user);
            } else {
                showError();
            }
        } else {
            showError();
        }
    }

    function showError() {
        document.getElementById('err').style.display = 'block';
        setTimeout(() => { document.getElementById('err').style.display = 'none'; }, 3000);
    }

    function renderDashboard(user) {
        
        document.getElementById('login-zone').style.display = 'none';
        document.getElementById('staff-content').style.display = 'block';
        document.getElementById('greet').innerText = user.name;
        document.getElementById('user-role').innerText = "–î–æ–ø—É—Å–∫: " + user.role;
        const container = document.getElementById('buttons-container');
        container.innerHTML = ""; 

        const role = user.role;

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–Ω–æ–ø–æ–∫ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–æ–ª–∏
        if (role === "scientific") {
            container.innerHTML += '<button class="btn" onclick="location.href=\'profile.html\'">üë§ –õ–ò–ß–ù–û–ï –î–û–°–¨–ï</button>';
            container.innerHTML += '<button class="btn" onclick="nav(\'archive\')">üìÇ –ê–†–•–ò–í –ê–ù–û–ú–ê–õ–ò–ô</button>';
            container.innerHTML += '<button class="btn" onclick="nav(\'map\')">üó∫Ô∏è –ö–ê–†–¢–ê –ö–û–ú–ü–õ–ï–ö–°–û–í</button>';
            container.innerHTML += '<button class="btn" onclick="nav(\'nid\')">üß™ –ü–†–û–¢–û–ö–û–õ–´ –ù–ò–î</button>';
        } 
        else if (role === "military") {
            container.innerHTML += '<button class="btn" onclick="location.href=\'profile.html\'">üë§ –õ–ò–ß–ù–û–ï –î–û–°–¨–ï</button>';
            container.innerHTML += '<button class="btn" onclick="nav(\'military_prot\')">üõ°Ô∏è –í–û–ï–ù–ù–´–ï –ü–†–û–¢–û–ö–û–õ–´</button>';
            container.innerHTML += '<button class="btn" onclick="nav(\'map\')">üó∫Ô∏è –ö–ê–†–¢–ê –ö–û–ú–ü–õ–ï–ö–°–û–í</button>';
        } 
        else if (role === "council") {
            container.innerHTML += '<button class="btn" onclick="location.href=\'profile.html\'">üë§ –õ–ò–ß–ù–û–ï –î–û–°–¨–ï</button>';
            container.innerHTML += '<button class="btn btn-council" onclick="nav(\'archive\')">üìÇ –í–ï–°–¨ –ê–†–•–ò–í</button>';
            container.innerHTML += '<button class="btn btn-council" onclick="nav(\'map\')">üó∫Ô∏è –í–°–ï –ö–û–ú–ü–õ–ï–ö–°–´</button>';
            container.innerHTML += '<button class="btn btn-council" onclick="nav(\'nid\')">üß™ –ù–ò–î (–ß–¢–ï–ù–ò–ï)</button>';
            container.innerHTML += '<button class="btn btn-council" onclick="nav(\'military_prot\')">üõ°Ô∏è –û–ë–û–†–û–ù–ê (–ß–¢–ï–ù–ò–ï)</button>';
            container.innerHTML += '<button class="btn btn-council" style="grid-column: span 2;" onclick="nav(\'override\')">‚öñÔ∏è –ü–†–û–¢–û–ö–û–õ –û–ë–ù–£–õ–ï–ù–ò–Ø</button>';
        }
    }

    // --- –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–´–ô –í–´–•–û–î ---
    function logout() {
        sessionStorage.clear(); // –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å–µ—Å—Å–∏–∏
        location.reload(); 
    }

    function nav(page) {
        location.href = page + ".html";
    }
</script>

</body>
</html>