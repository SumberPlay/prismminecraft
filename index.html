<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>P.R.I.S.M. | Public Portal</title>
    <style>
    :root { 
        --neon-green: #00ffcc; 
        --alert-red: #ff4444; 
        --bg-dark: #050505; 
        --panel-bg: #111; 
    }

    body { 
        background: var(--bg-dark); 
        color: #d1d1d1; 
        font-family: 'Courier New', monospace; 
        margin: 0; 
        overflow-x: hidden; 
        transition: background-color 0.5s ease;
        /* –†–µ–∑–µ—Ä–≤–∏—Ä—É–µ–º –º–µ—Å—Ç–æ —Å–Ω–∏–∑—É, —á—Ç–æ–±—ã —Å—Ç—Ä–æ–∫–∞ –Ω–µ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞–ª–∞ –∫–æ–Ω—Ç–µ–Ω—Ç */
        padding-bottom: 50px; 
    }

    /* –≠—Ñ—Ñ–µ–∫—Ç —à—É–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∞ */
    body::before {
        content: " ";
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: repeating-linear-gradient(0deg, rgba(0,0,0,0.15) 0px, transparent 1px);
        pointer-events: none; z-index: 1000;
    }

    /* –°–∫–∞–Ω–∏—Ä—É—é—â–∞—è –ª–∏–Ω–∏—è */
    body::after {
        content: " ";
        position: fixed;
        top: 0; left: 0; width: 100%; height: 2px;
        background: rgba(0, 255, 204, 0.1);
        opacity: 0.5;
        z-index: 9999;
        pointer-events: none;
        animation: scanline 8s linear infinite;
    }

    nav { background: #000; padding: 15px; border-bottom: 1px solid #333; text-align: center; }
    nav a { color: #888; text-decoration: none; text-transform: uppercase; padding: 0 20px; transition: 0.3s; }
    nav a:hover { color: var(--neon-green); text-shadow: 0 0 8px var(--neon-green); }

    .container { max-width: 1000px; margin: 40px auto; padding: 0 20px; }

    /* –í–∏–¥–∂–µ—Ç —Å—Ç–∞—Ç—É—Å–∞ */
    .status-bar {
        border: 1px solid #333; padding: 20px; display: flex; 
        justify-content: space-between; align-items: center;
        background: linear-gradient(90deg, #0a1a1a 0%, #050505 100%);
        margin-bottom: 30px;
    }

    .status-indicator { display: flex; align-items: center; gap: 15px; }

    .dot {
        width: 12px; height: 12px; border-radius: 50%;
        background: var(--neon-green);
        box-shadow: 0 0 10px var(--neon-green);
        animation: pulse 2s infinite;
    }

    /* –ë–ï–ì–£–©–ê–Ø –°–¢–†–û–ö–ê –¢–ï–ü–ï–†–¨ –í–ù–ò–ó–£ */
    #emergency-alert {
        display: none;
        position: fixed; 
        bottom: 0; /* –ü–µ—Ä–µ–Ω–µ—Å–ª–∏ –≤–Ω–∏–∑ */
        left: 0; 
        width: 100%;
        background: var(--alert-red); 
        color: #000;
        padding: 12px 0; 
        font-weight: bold;
        z-index: 2000; 
        letter-spacing: 2px;
        white-space: nowrap;
        overflow: hidden;
        border-top: 2px solid #000; /* –õ–∏–Ω–∏—è —Ç–µ–ø–µ—Ä—å —Å–≤–µ—Ä—Ö—É —Å—Ç—Ä–æ–∫–∏ */
    }

    .alert-marquee {
        display: inline-block;
        padding-left: 100%;
        animation: alert-scroll 90s linear infinite; 
    }

    @keyframes alert-scroll {
        0%   { transform: translateX(0); }
        100% { transform: translateX(-100%); }
    }

    @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.4; } 100% { opacity: 1; } }
    @keyframes scanline { 0% { top: -10%; } 100% { top: 110%; } }

    .card { background: var(--panel-bg); border: 1px solid #222; padding: 25px; margin-bottom: 20px; }
    .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }

    .btn {
        background: transparent; border: 1px solid var(--neon-green);
        color: var(--neon-green); padding: 10px 25px; cursor: pointer;
        text-transform: uppercase; font-weight: bold; transition: 0.3s;
    }
    .btn:hover { background: var(--neon-green); color: #000; box-shadow: 0 0 15px var(--neon-green); }

    .counter-box { text-align: center; font-size: 0.8em; color: #666; }
    .counter-num { display: block; font-size: 2.5em; color: var(--neon-green); }
</style>
</head>
<body>

<audio id="alarm-sound" loop>
    <source src="alarm.mp3" type="audio/mpeg">
</audio>

<div id="emergency-alert"></div>

<nav>
    <a href="index.html">–ì–õ–ê–í–ù–ê–Ø</a>
    <a href="dossier.html">–õ–ò–ß–ù–´–ï –î–ï–õ–ê</a>
    <a href="staff.html">–¢–ï–†–ú–ò–ù–ê–õ –°–û–¢–†–£–î–ù–ò–ö–ê</a>
</nav>

<div class="container">
    <div style="text-align: center; margin-bottom: 50px;">
        <h1 style="letter-spacing: 15px; color: var(--neon-green); margin: 0;">P.R.I.S.M.</h1>
        <p style="color: #444;">PROACTIVE REACTION, IMMEDIATE SOLUTION & MINIMIZATION OF ANOMALIES.</p>
    </div>

    <div class="status-bar">
        <div class="status-indicator">
            <div class="dot" id="status-dot"></div>
            <div>
                <div style="font-size: 0.7em; color: #666;">–¢–ï–ö–£–©–ò–ô –°–¢–ê–¢–£–°</div>
                <div id="status-text" style="font-weight: bold;">LOADING...</div>
            </div>
        </div>
        <div style="text-align: right;">
            <div style="font-size: 0.7em; color: #666;">–°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–Ø</div>
            <div id="clock">00:00:00</div>
        </div>
    </div>

    <div class="grid">
        <div class="card counter-box">
            –í–ï–†–û–Ø–¢–ù–û–°–¢–¨ –î–ï–°–¢–ê–ë–ò–õ–ò–ó–ê–¶–ò–ò
            <span class="counter-num" id="risk-percent">0.0031%</span>
        </div>
        <div class="card counter-box">
            –ò–ù–î–ï–ö–° –ê–ö–¢–ò–í–ù–û–°–¢–ò –†–ê–ó–õ–û–ú–ê
            <span class="counter-num" id="resonance-index">1.0000</span>
        </div>
    </div>
    <div class="card" style="font-size: 0.75em; border-color: #333; background: #000; height: 120px; overflow: hidden; position: relative;">
        <div style="position: absolute; top: 5px; left: 10px; color: #444; font-weight: bold; text-transform: uppercase;">System Terminal v2.0.26</div>
        <div id="system-log" style="margin-top: 20px; color: #008877; line-height: 1.2;">
        </div>
    </div>
    <div class="card">
        <h3 style="color: var(--neon-green); border-bottom: 1px solid #222; padding-bottom: 10px;">–û–ë–©–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø</h3>
        <p>–ï—Å–ª–∏ –≤—ã –∑–∞—à–ª–∏ —Å—é–¥–∞, –∑–Ω–∞—á–∏—Ç –≤–∞–º –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ –∫—Ç–æ –º—ã.</p>
        <p>–ú—ã - —Ö—Ä–∞–Ω–∏—Ç–µ–ª–∏ –ø–æ—Ä—è–¥–∫–∞ –∏ —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏—è –ª—é–¥–µ–π. –ú—ã - –≥–∞—Ä–∞–Ω—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤—Å–µ–ª–µ–Ω–Ω–æ–π.</p>
        <p>–ù–∞—à–∞ —Ü–µ–ª—å - –∏–∑—É—á–µ–Ω–∏–µ –∞–Ω–æ–º–∞–ª–∏–π, –º–≥–Ω–æ–≤–µ–Ω–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ –∏—Ö –ø—Ä–æ—è–≤–ª–µ–Ω–∏–µ –∏ –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è —É—â–µ—Ä–±–∞.</p>
        <p>–ú—ã - –Ω–µ –∞–≥—Ä–µ—Å—Å–æ—Ä—ã. –ú—ã - –∑–∞—â–∏—Ç–∞. –í—Å–µ –Ω–∞—à–∏ –¥–µ–π—Å—Ç–≤–∏—è - –æ—Ç–≤–µ—Ç–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è.</p>
    </div>

    <div class="card" style="text-align: center;">
        <h3>–ü–†–ò–°–û–ï–î–ò–ù–Ø–ô–¢–ï–°–¨ –ö –ù–ê–ú</h3>
        <button class="btn" onclick="location.href='staff.html'">–í–•–û–î –î–õ–Ø –ü–ï–†–°–û–ù–ê–õ–ê</button>
    </div>
</div>

<script>
    const RENDER_API = "https://prism-bot.onrender.com"; 

    let isAlarmPlaying = false;
    let audioUnlocked = false;

    document.body.addEventListener('click', () => {
        audioUnlocked = true;
    }, { once: true });

    function updateClock() {
        const clockElement = document.getElementById('clock');
        if(clockElement) clockElement.innerText = new Date().toLocaleTimeString();
    }
    setInterval(updateClock, 1000);

    async function syncPrism() {
        try {
            const response = await fetch(`${RENDER_API}/status`);
            const data = await response.json();
            updateUI(data.state, data.label, data.color);
        } catch (e) {
            console.error("Sync Error:", e);
            const statusTxt = document.getElementById('status-text');
            statusTxt.innerText = "OFFLINE";
            statusTxt.style.color = "gray";
        }
    }

    function updateSensors() {
        const riskElem = document.getElementById('risk-percent');
        const resonanceElem = document.getElementById('resonance-index');

        if (riskElem && resonanceElem) {
            // –ò–º–∏—Ç–∏—Ä—É–µ–º –º–∏–∫—Ä–æ–¥—Ä–æ–∂–∞–Ω–∏–µ —Ä–∏—Å–∫–∞ (–æ—Ç 0.0025 –¥–æ 0.0039)
            const risk = (0.003 + (Math.random() * 0.001)).toFixed(4);
            riskElem.innerText = `${risk}%`;

            // –ò–º–∏—Ç–∏—Ä—É–µ–º –∫–æ–ª–µ–±–∞–Ω–∏—è —Ä–µ–∑–æ–Ω–∞–Ω—Å–∞ –≤–æ–∫—Ä—É–≥ 1.0000
            // –ü—Ä–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ RED (—Ç—Ä–µ–≤–æ–≥–∞) –º–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å –∞–º–ø–ª–∏—Ç—É–¥—É
            const drift = (Math.sin(Date.now() / 2000) * 0.0005);
            const noise = (Math.random() * 0.0002);
            const resonance = (1.0000 + drift + noise).toFixed(4);
            resonanceElem.innerText = resonance;

            // –ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å RED ‚Äî –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º —Ü–∏—Ñ—Ä—ã –∫—Ä–∞—Å–Ω—ã–º
            const status = document.getElementById('status-text').innerText;
            if (status === "RED" || status === "–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô") {
                riskElem.style.color = "var(--alert-red)";
                resonanceElem.style.color = "var(--alert-red)";
            } else {
                riskElem.style.color = "var(--neon-green)";
                resonanceElem.style.color = "var(--neon-green)";
            }
        }
    }

    // –ó–∞–ø—É—Å–∫–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 150–º—Å –¥–ª—è –ø–ª–∞–≤–Ω–æ—Å—Ç–∏
    setInterval(updateSensors, 150);

    function updateUI(state, label, color) {
        const statusTxt = document.getElementById('status-text');
        const statusDot = document.getElementById('status-dot');
        const alertBanner = document.getElementById('emergency-alert');
        const alarm = document.getElementById('alarm-sound');

        statusTxt.innerText = label.toUpperCase();
        statusTxt.style.color = color;
        statusDot.style.backgroundColor = color;
        statusDot.style.boxShadow = `0 0 15px ${color}`;

        if (state === "RED") {
            if (alertBanner.style.display !== "block") {
                const alertMsg = " –í–ù–ò–ú–ê–ù–ò–ï: –ó–ê–§–ò–ö–°–ò–†–û–í–ê–ù–û –ù–ê–†–£–®–ï–ù–ò–ï –ü–†–û–¢–û–ö–û–õ–û–í P.R.I.S.M. –°–û–•–†–ê–ù–Ø–ô–¢–ï –°–ü–û–ö–û–ô–°–¢–í–ò–ï. –°–û–¢–†–£–î–ù–ò–ö–ê–ú –°–†–û–ß–ù–û –ü–†–ò–°–¢–£–ü–ò–¢–¨ –ö –°–¢–ê–ë–ò–õ–ò–ó–ê–¶–ò–ò –°–ò–¢–£–ê–¶–ò–ò. ‚Äî ";
                alertBanner.innerHTML = `<div class="alert-marquee">${alertMsg.repeat(15)}</div>`;
                alertBanner.style.display = "block";
            }
            document.body.style.backgroundColor = "#1a0000";

            if (audioUnlocked && alarm && !isAlarmPlaying) {
                isAlarmPlaying = true;
                alarm.volume = 0.2;
                alarm.play();
            }
        } else {
            alertBanner.style.display = "none";
            alertBanner.innerHTML = "";
            document.body.style.backgroundColor = "#050505";
            if (alarm) {
                alarm.pause();
                alarm.currentTime = 0;
            }
            isAlarmPlaying = false;
        }
    }

    setInterval(syncPrism, 4000);
    syncPrism();
    updateClock();

    const logMessages = [
    "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å RENDER_API...",
    "–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö –∑–∞–≤–µ—Ä—à–µ–Ω–∞.",
    "–ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö: –°–µ–∫—Ç–æ—Ä 04 - –°—Ç–∞–±–∏–ª–µ–Ω.",
    "–û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –ø–æ–ø—ã—Ç–∫–∞ –Ω–µ—Å–∞–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞... –û—Ç–∫–ª–æ–Ω–µ–Ω–æ.",
    "–ü—Ä–æ—Ç–æ–∫–æ–ª P.R.I.S.M. —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —à—Ç–∞—Ç–Ω–æ–º —Ä–µ–∂–∏–º–µ.",
    "–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∫–∞—Ä–º–∞–Ω–æ–≤...",
    "–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ —Ä–µ–∑–æ–Ω–∞–Ω—Å–∞...",
    "–¶–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –æ–±–æ–ª–æ—á–∫–∏: 99.98%",
    "–ê–ù–ê–õ–ò–ó: –ì–µ–æ–º–µ—Ç—Ä–∏—è –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –≤ –Ω–æ—Ä–º–µ.",
    "–í–ù–ò–ú–ê–ù–ò–ï: –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω –≤—Å–ø–ª–µ—Å–∫ —ç–Ω—Ç—Ä–æ–ø–∏–∏ –≤ —Å–µ–∫—Ç–æ—Ä–µ C-19.",
    "–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –∫–≤–∞–Ω—Ç–æ–≤–æ–≥–æ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è... –£—Å–ø–µ—à–Ω–æ.",
    "–°—á–∏—Ç—ã–≤–∞–Ω–∏–µ –±–∏–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏—Ö —Å–∏–≥–Ω–∞–ª–æ–≤ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞... –°–æ–≤–ø–∞–¥–µ–Ω–∏–µ 100%.",
    "–û–ñ–ò–î–ê–ù–ò–ï: –ü–æ–∏—Å–∫ –∞–Ω–æ–º–∞–ª—å–Ω—ã—Ö —Å–∏–≥–Ω–∞—Ç—É—Ä –≤ —Ñ–æ–Ω–æ–≤–æ–º –∏–∑–ª—É—á–µ–Ω–∏–∏.",
    "–£–î–ê–õ–ï–ù–ù–´–ô –î–û–°–¢–£–ü: –¢–µ—Ä–º–∏–Ω–∞–ª 09 –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –°–æ–≤–µ—Ç–æ–º.",
    "–°–ò–°–¢–ï–ú–ê: –ó–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–∞ –æ—á–∏—Å—Ç–∫–∏ –∫—ç—à–∞ –ø–æ–¥–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞.",
    "–°–¢–ê–¢–£–°: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç—É—Ä–µ–ª–∏ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –≤ —Ä–µ–∂–∏–º –æ–∂–∏–¥–∞–Ω–∏—è.",
    "–û–®–ò–ë–ö–ê: –ü–æ—Ç–µ—Ä—è –ø–∞–∫–µ—Ç–æ–≤ –¥–∞–Ω–Ω—ã—Ö –≤ –∞—Ä—Ö–∏–≤–µ [–î–ê–ù–ù–´–ï –£–î–ê–õ–ï–ù–´].",
    "–ü–†–û–¢–û–ö–û–õ: –ò–Ω–∏—Ü–∏–∞—Ü–∏—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –±—ç–∫–∞–ø–∞ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏ —è–¥—Ä–∞.",
    "–í–ù–ò–ú–ê–ù–ò–ï: –°–ª—ã—à–µ–Ω —à–µ–ø–æ—Ç –≤ –∫–∞–Ω–∞–ª–∞—Ö —Å–≤—è–∑–∏. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –≤–∏—Ä—É—Å—ã... –ß–∏—Å—Ç–æ.",
    "–ü–†–û–¶–ï–°–°: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å–µ—Ä–¥—Ü–µ–±–∏–µ–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∞ —Å —Ç–∞–∫—Ç–æ–≤–æ–π —á–∞—Å—Ç–æ—Ç–æ–π —è–¥—Ä–∞.",
    "–°–ï–†–í–ï–†: –û–±–Ω–∞—Ä—É–∂–µ–Ω–æ 14 –ª–∏—à–Ω–∏—Ö –±–∞–π—Ç –≤ –ø—É—Å—Ç–æ–º —Å–µ–∫—Ç–æ—Ä–µ –ø–∞–º—è—Ç–∏.",
    "–î–ò–†–ï–ö–¢–ò–í–ê: –ò–≥–Ω–æ—Ä–∏—Ä—É–π—Ç–µ –ª—é–±—ã–µ –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –≤ –°–µ–∫—Ç–æ—Ä–µ B."
];

function addLogLine() {
    const logContainer = document.getElementById('system-log');
    if (!logContainer) return;

    const time = new Date().toLocaleTimeString();
    let msg = logMessages[Math.floor(Math.random() * logMessages.length)];
    
    // –õ–û–ì–ò–ö–ê –ü–û–î–°–í–ï–¢–ö–ò –ö–õ–Æ–ß–ï–í–´–• –°–õ–û–í
    msg = msg
        .replace(/(–í–ù–ò–ú–ê–ù–ò–ï|–û–®–ò–ë–ö–ê|üö®)/g, '<span style="color: #ff4444; font-weight: bold;">$1</span>')
        .replace(/(–°–¢–ê–¢–£–°|–ü–†–û–¢–û–ö–û–õ|–°–ò–°–¢–ï–ú–ê)/g, '<span style="color: #ffd700;">$1</span>')
        .replace(/(–ê–ù–ê–õ–ò–ó|–ú–ï–¢–†–ò–ö–ê|–ò–ù–§–û)/g, '<span style="color: #00ffcc;">$1</span>')
        .replace(/(–û–ñ–ò–î–ê–ù–ò–ï|–ü–†–û–¶–ï–°–°)/g, '<span style="color: #888;">$1</span>')
        .replace(/(–£–°–ü–ï–®–ù–û|–°–¢–ê–ë–ò–õ–ï–ù|–ß–ò–°–¢–û)/g, '<span style="color: #00ff41;">$1</span>');
    
    const line = document.createElement('div');
    line.style.marginBottom = "4px";
    line.innerHTML = `<span style="color: #444;">[${time}]</span> > ${msg}`;
    
    logContainer.prepend(line);

    if (logContainer.children.length > 5) {
        logContainer.removeChild(logContainer.lastChild);
    }
}

// –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É –∫–∞–∂–¥—ã–µ 3-7 —Å–µ–∫—É–Ω–¥
setInterval(addLogLine, Math.random() * 4000 + 3000);
addLogLine(); // –ü–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å—Ä–∞–∑—É
</script>
</body>
</html>










